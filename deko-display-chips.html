<link rel="import" href="../paper-chip/paper-chip.html">
<link rel="import" href="../polymer/polymer.html">
<!--
  `<deko-display-chips></deko-display-chips>` display chips for deko
  @demo demo.html
-->
<dom-module id="deko-display-chips">
  <template>
    <style>:host {display:block;position: fixed;bottom: 92px;justify-content: space-evenly;flex: auto;width: 100%;display: flex;flex-wrap: wrap}</style>
    <template is="dom-repeat" items="{{items}}">
      <template is="dom-if" if="[[!item.text]]">
        <paper-chip on-tap="fireChip" single-line>
          <div class="label" slot="label">[[item]]</div>
        </paper-chip>
      </template>
      <template is="dom-if" if="[[item.text]]">
        <paper-chip on-tap="findTap" chip$="[[item]]" on-remove="findRemove" removable="[[item.removable]]" single-line>
          <template is="dom-if" if="[[item.image]]">
            <img slot="icon" src="[[item.image]]" />
          </template>
          <div class="label" slot="label">[[item.text]]</div>
        </paper-chip>
      </template>
    </template>
    
  </template>
</dom-module>
<script>
  Polymer({
    is: "deko-display-chips",
    properties:{
      items: Array,
    },
    fireChip: function(e) {
      this.fire("picked", e) 
    },
    findTap: function(e) {
      this.items.reduce(function(funct, chip) {
        if (chip.text === e.target.innerText && chip.onTap) {
          return chip.onTap
        } else {
          return funct
        }
      }, this.findChip)(e) 
    },
    findRemove: function(e){
      this.items.reduce(function(funct, chip) {
        if (chip.text === e.target.innerText && chip.onRemove) {
          return chip.onRemove
        } else {
          return funct
        }
      }, this.findChip)(e) 
    }
  })
</script>
